.PHONY: install-all check-tools install-git install-curl install-vim install-python3 update-system help

# Installation de tous les outils
install-all: update-system install-git install-curl install-vim install-python3
	@echo "üéâ Installation de tous les outils termin√©e!"

# V√©rifier les outils install√©s
check-tools:
	@echo "üìä V√©rification des outils install√©s..."
	@echo -n "Git: "
	@which git >/dev/null 2>&1 && echo "‚úÖ Install√© ($(shell git --version))" || echo "‚ùå Non install√©"
	@echo -n "Curl: "
	@which curl >/dev/null 2>&1 && echo "‚úÖ Install√© ($(shell curl --version | head -n1))" || echo "‚ùå Non install√©"
	@echo -n "Vim: "
	@which vim >/dev/null 2>&1 && echo "‚úÖ Install√© ($(shell vim --version | head -n1))" || echo "‚ùå Non install√©"
	@echo -n "Python3: "
	@which python3 >/dev/null 2>&1 && echo "‚úÖ Install√© ($(shell python3 --version))" || echo "‚ùå Non install√©"
	@echo -n "Pip3: "
	@which pip3 >/dev/null 2>&1 && echo "‚úÖ Install√© ($(shell pip3 --version))" || echo "‚ùå Non install√©"

# Mettre √† jour le syst√®me
update-system:
	@echo "üîÑ Mise √† jour du syst√®me..."
	@sudo apt update -y
	@sudo apt upgrade -y

# Installer Git
install-git:
	@echo "üì¶ V√©rification de Git..."
	@if ! which git >/dev/null 2>&1; then \
		echo "üì¶ Installation de Git..."; \
		sudo apt install -y git; \
		echo "‚úÖ Git install√© avec succ√®s!"; \
	else \
		echo "‚úÖ Git est d√©j√† install√©: $(shell git --version)"; \
	fi

# Installer Curl
install-curl:
	@echo "üì¶ V√©rification de Curl..."
	@if ! which curl >/dev/null 2>&1; then \
		echo "üì¶ Installation de Curl..."; \
		sudo apt install -y curl; \
		echo "‚úÖ Curl install√© avec succ√®s!"; \
	else \
		echo "‚úÖ Curl est d√©j√† install√©: $(shell curl --version | head -n1)"; \
	fi

# Installer Vim
install-vim:
	@echo "üì¶ V√©rification de Vim..."
	@if ! which vim >/dev/null 2>&1; then \
		echo "üì¶ Installation de Vim..."; \
		sudo apt install -y vim; \
		echo "‚úÖ Vim install√© avec succ√®s!"; \
	else \
		echo "‚úÖ Vim est d√©j√† install√©: $(shell vim --version | head -n1)"; \
	fi

# Installer Python3 et pip3
install-python3:
	@echo "üì¶ V√©rification de Python3..."
	@if ! which python3 >/dev/null 2>&1; then \
		echo "üì¶ Installation de Python3..."; \
		sudo apt install -y python3 python3-pip python3-dev python3-venv; \
		echo "‚úÖ Python3 install√© avec succ√®s!"; \
	else \
		echo "‚úÖ Python3 est d√©j√† install√©: $(shell python3 --version)"; \
	fi
	@if ! which pip3 >/dev/null 2>&1; then \
		echo "üì¶ Installation de pip3..."; \
		sudo apt install -y python3-pip; \
		echo "‚úÖ pip3 install√© avec succ√®s!"; \
	else \
		echo "‚úÖ pip3 est d√©j√† install√©: $(shell pip3 --version)"; \
	fi

# Installer des outils de d√©veloppement suppl√©mentaires
install-dev-tools:
	@echo "üõ†Ô∏è Installation d'outils de d√©veloppement suppl√©mentaires..."
	@sudo apt install -y build-essential software-properties-common apt-transport-https ca-certificates gnupg lsb-release
	@echo "‚úÖ Outils de d√©veloppement install√©s!"

# Configurer Git (optionnel)
configure-git:
	@echo "üîß Configuration de Git..."
	@read -p "Nom d'utilisateur Git: " name && git config --global user.name "$$name"
	@read -p "Email Git: " email && git config --global user.email "$$email"
	@git config --global init.defaultBranch main
	@echo "‚úÖ Git configur√© avec succ√®s!"

# Nettoyer le syst√®me
clean-system:
	@echo "üßπ Nettoyage du syst√®me..."
	@sudo apt autoremove -y
	@sudo apt autoclean
	@echo "‚úÖ Nettoyage termin√©!"

# Afficher l'aide
help:
	@echo "üõ†Ô∏è Outils - Commandes disponibles:"
	@echo "  make install-all       	- 	 Installer tous les outils (git, curl, vim, python3)"
	@echo "  make check-tools       	- 	 V√©rifier quels outils sont install√©s"
	@echo "  make install-git       	- 	 Installer Git uniquement"
	@echo "  make install-curl      	- 	 Installer Curl uniquement"
	@echo "  make install-vim       	- 	 Installer Vim uniquement"
	@echo "  make install-python3   	- 	 Installer Python3 et pip3 uniquement"
	@echo "  make install-dev-tools 	- 	 Installer des outils de d√©veloppement"
	@echo "  make configure-git     	- 	 Configurer Git (nom et email)"
	@echo "  make update-system     	- 	 Mettre √† jour le syst√®me"
	@echo "  make clean-system      	- 	 Nettoyer le syst√®me"
	@echo "  make help              	- 	 Afficher cette aide"